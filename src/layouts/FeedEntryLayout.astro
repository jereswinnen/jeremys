---
import MasterLayout from "../layouts/MasterLayout.astro";
import type { CollectionEntry } from "astro:content";

interface Props {
  entry: CollectionEntry<"notes"> | CollectionEntry<"links">;
}

const { entry } = Astro.props;
const { Content } = await entry.render();

const title = entry.data.title;
const date = entry.data.publishDate;
const formattedDate = date.toLocaleDateString("nl-BE", {
  year: "numeric",
  month: "long",
  day: "numeric",
  timeZone: "Europe/Brussels",
});
const formattedTime = date.toLocaleTimeString("nl-BE", {
  hour: "2-digit",
  minute: "2-digit",
  timeZone: "Europe/Brussels",
});
---

<MasterLayout title={title}>
  <article class="max-w-2xl mx-auto py-8">
    <header class="mb-8">
      <h1 class="text-3xl font-bold mb-2">{title}</h1>
      <time datetime={date.toISOString()} class="opacity-70">
        {formattedDate} at {formattedTime}
      </time>
    </header>

    {
      "url" in entry.data ? (
        <div class="prose">
          <p class="mb-4">
            <a href={entry.data.url} class="text-blue-600 hover:underline">
              Visit linked article â†’
            </a>
          </p>
          {entry.data.note && <p class="opacity-70">{entry.data.note}</p>}
        </div>
      ) : (
        <div class="prose">
          <Content />
        </div>
      )
    }
  </article>
</MasterLayout>
